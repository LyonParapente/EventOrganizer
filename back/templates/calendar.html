<!DOCTYPE html lang="{{lang}}">
<html>
<head>
	<meta charset="utf-8" />
	<title>{{calendar}}</title>
	<meta name="viewport" content="width=600" />
	<link rel="stylesheet" href="static/css/fullcalendar.min.css" />
	<link rel="stylesheet" href="static/css/theme/{{theme}}.bootstrap.min.css" />
	<link rel="stylesheet" href="static/css/calendar.min.css" />
	<link rel="stylesheet" href="static/css/fontawesome-all.min.css" />
	<link rel="stylesheet" href="static/css/bootstrap-colorpicker.min.css" />
	<link rel="stylesheet" href="static/css/html5tooltips.min.css" />

	<link rel="stylesheet" href="static/css/leaflet/leaflet.css" />
	<link rel="stylesheet" href="static/css/leaflet/geocoder/esri-leaflet-geocoder.css" />
	<link rel="stylesheet" href="static/css/leaflet/fullscreen/leaflet.fullscreen.css" />
	<link rel="shortcut icon" href="static/favicon.ico" />
</head>
<body>

{{header|safe}}

<div id="calendar">
	<div id="loading" style="display:none">
		<i class="fa fa-circle-notch fa-spin"></i>
	</div>
</div>

<div class="modal fade" id="createEvent" style="display:none" tabindex="-1" role="dialog" aria-labelledby="createEventTitle" aria-hidden="true">
	<div class="modal-dialog modal-lg">
		<div class="modal-content">
			<div class="modal-header">
				<h4 class="modal-title container text-center trad" id="createEventTitle">Plan an event</h4>
				<button type="button" class="close" data-dismiss="modal" aria-label="Close">
					<span aria-hidden="true">&times;</span>
				</button>
			</div>
			<div class="modal-body" id="createEventBody">
				<form class="needs-validation" novalidate>
					<div class="form-group row">
						<label for="sortie_title" class="col-sm-3 col-form-label">Title</label>
						<div class="col-sm-9">
							<input type="text" class="form-control" id="sortie_title" tabindex="1" required autofocus />
							<div class="invalid-feedback trad">Please provide a title</div>
						</div>
					</div>
					<div class="form-group row">
						<label for="sortie_lieu" class="col-sm-3 col-form-label">Activity location</label>
						<div class="col-sm-9">
							<input type="text" class="form-control" id="sortie_lieu" tabindex="2" />
							<div class="invalid-feedback trad">Please provide a location</div>
						</div>
					</div>
					<div class="form-group row">
						<label for="sortie_RDV" class="col-sm-3 col-form-label">Meeting location</label>
						<div class="col-sm-9">
							<div class="input-group">
								<input type="text" class="form-control" id="sortie_RDV" tabindex="3" />
								<input type="hidden" id="sortie_RDV_gps" />
								<div class="input-group-append">
									<div class="spinner-border text-secondary" role="status" id="spinner_RDV"></div>
									<button class="btn btn-outline-primary btn-sm trad" type="button" id="sortie_RDV_reset">Reset</button>
								</div>
							</div>
							<div id="sortie_map"></div>
						</div>
					</div>
					<div class="form-group row">
						<label class="col-sm-3 col-form-label date">Date</label>
						<div class="col">
							<label for="sortie_date_start">DateFrom</label>
							<input type="date" class="form-control" id="sortie_date_start" tabindex="4" required />
							<div class="invalid-feedback trad">Invalid date</div>
						</div>
						<div class="col">
							<label for="sortie_date_end">DateTo</label>
							<input type="date" class="form-control" id="sortie_date_end" tabindex="5" required />
							<div class="invalid-feedback trad">Cannot end before start</div>
						</div>
					</div>
					<div class="form-group row">
						<label for="sortie_heure" class="col-sm-3 col-form-label">Time</label>
						<div class="col-sm-2">
							<input type="text" class="form-control" id="sortie_heure" tabindex="6" />
						</div>
						<div class="col form-row">
							<div class="col-auto form-inline">
								<label for="sortie_whatsapp"><i class="fab fa-whatsapp" title="WhatsApp">&nbsp;</i><span>invite link:</span></label>
							</div>
							<div class="col">
								<input type="text" class="form-control" id="sortie_whatsapp" placeholder="https://chat.whatsapp.com/..." tabindex="7" />
							</div>
						</div>
					</div>
					<div class="form-group row">
						<label for="sortie_description" class="col-sm-3 col-form-label">Description</label>
						<div class="col-sm-9">
							<textarea class="form-control" id="sortie_description" rows="5" tabindex="8" placeholder="Type a description... Markdown available!"></textarea>
						</div>
					</div>
					<div class="form-group row">
						<label for="sortie_category" class="col-sm-3 col-form-label">Category</label>
						<div class="col-sm-9 dropdown">
							<button class="btn btn-outline-primary dropdown-toggle trad" type="button" id="sortie_category" tabindex="9" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">None</button>
							<div class="dropdown-menu" aria-labelledby="sortie_category">
								<a class="dropdown-item trad" href="javascript:;">None</a>
								<div class="dropdown-divider"></div>
								<div id="sortie_categories"></div>
								<div class="dropdown-divider"></div>
								<div id="sortie_color_box" class="input-group">
									<div>
										<input id="sortie_color" type="text" class="form-control" placeholder="#color" />
										<button id="sortie_color_btn" type="button" class="btn btn-secondary btn-sm float-right">OK</button>
									</div>
								</div>
							</div>
						</div>
					</div>
					<div id="event_post_error"></div>
					<button type="submit" class="btn btn-outline-primary btn-lg btn-block trad" id="sortie_save" tabindex="10">Save</button>
				</form>
			</div>
		</div>
	</div>
</div>

<div class="modal" id="eventProperties" style="display:none" tabindex="-1" role="dialog" aria-labelledby="event_title" aria-hidden="true">
	<div class="modal-dialog modal-xl">
		<div class="modal-content">
			<div class="modal-header align-items-center">
				<div class="d-flex flex-column">
					<span id="event_id"></span>
					<span class="badge" id="event_category"></span>
				</div>
				<i class="fas fa-bell" id="event_bell"></i>
				<button type="button" class="btn btn-outline-success d-flex align-items-center ml-2 pl-0" id="event_whatsapp">
					<i class="fab fa-whatsapp" title="WhatsApp">&nbsp;</i>
					WhatsApp
				</button>
				<h4 class="modal-title container text-center" id="event_title"></h4>
				<button id="del_event" type="button" class="btn btn-outline-danger mr-2 trad">Delete</button><button id="edit_event" type="button" class="btn btn-primary mr-2 trad">Edit</button>
				<button type="button" class="close" data-dismiss="modal" aria-label="Close">
					<span aria-hidden="true">&times;</span>
				</button>
			</div>
			<div class="modal-body" id="eventPropertiesBody">
				<div class="container mx-0">
					<div class="row justify-content-around">

						<div class="col-4 px-0 flex-column form-inline align-items-start">
							<div class="input-group mt-auto pt-1" id="event_date_from">
								<div class="input-group-prepend">
									<div class="input-group-text trad">DateFrom</div>
								</div>
								<span class="form-control" id="event_date_start"></span>
							</div>

							<div class="input-group mt-auto pt-1" id="event_date_to">
								<div class="input-group-prepend">
									<div class="input-group-text trad">DateTo</div>
								</div>
								<span class="form-control" id="event_date_end"></span>
							</div>

							<div class="input-group mt-auto pt-1" id="event_date_the">
								<div class="input-group-prepend">
									<div class="input-group-text trad">DateThe</div>
								</div>
								<span class="form-control" id="event_date_day"></span>
							</div>

							<div class="input-group mt-auto pt-1" id="event_location_box">
								<div class="input-group-prepend">
									<div class="input-group-text" id="event_location_title"><i class="fas fa-map-marker" title="Activity location"></i></div><!-- trad -->
								</div>
								<span class="form-control" id="event_location"></span>
								<textarea class="form-control bg-white" rows="1" readonly id="event_location2"></textarea>
							</div>
							<div class="mt-auto"></div>
						</div>

						<div class="col-auto p-0">
							<div class="row">
								<div class="col-auto px-0">
									<div class="text-center mt-1"><a id="event_author_img"></a></div>
								</div>
								<div class="col-auto pr-0 flex-column form-inline align-items-start">
									<div class="input-group mt-auto pt-1">
										<div class="input-group-prepend">
											<div class="input-group-text trad">By</div>
										</div>
										<span class="form-control" id="event_author"></span>
									</div>
									<div class="form-inline">
										<div class="input-group mt-auto pt-1" id="event_author_phone_box">
											<div class="input-group-prepend">
												<div class="input-group-text"><i class="fa fa-phone" title="Phone"></i></div><!-- trad -->
											</div>
											<span class="form-control" id="event_author_phone"></span>
										</div>
										<div class="input-group mt-auto ml-1 pt-1" id="event_author_whatsapp">
											<div class="input-group-prepend">
												<div class="input-group-text"><i class="fab fa-whatsapp" title="WhatsApp"></i></div>
											</div>
											<span class="form-control"><a href="https://api.whatsapp.com/send?phone=">WhatsApp</a></span>
										</div>
									</div>
									<div class="input-group mt-auto pt-1" id="event_author_email_box">
										<div class="input-group-prepend">
											<div class="input-group-text"><i class="fas fa-at" title="Email"></i></div><!-- trad -->
										</div>
										<span class="form-control" id="event_author_email"></span>
									</div>
									<div class="mt-auto"></div>
								</div>
							</div>
						</div>

					</div>
				</div>

				<div class="my-2 p-3 bg-light">
					<div class="lead text-break" id="event_description"></div>
				</div>

				<div class="container-fluid">
					<div class="row">
						<div class="col-md-8 p-0 mr-md-2">

							<div class="form-inline mb-1">
								<div class="input-group mr-1" id="event_rdv_time_box">
										<div class="input-group-prepend">
											<div class="input-group-text"><i class="far fa-clock" id="event_rdv_time_title" title="Time"></i></div><!-- trad -->
										</div>
										<span class="form-control" id="event_rdv_time"></span>
								</div>

								<div class="input-group flex-grow-1" id="event_rdv_location_box">
									<div class="input-group-prepend">
										<div class="input-group-text" id="event_rdv_location_title"><i class="fas fa-map-marker-alt" title="Meeting location"></i></div><!-- trad -->
									</div>
									<input type="text" class="form-control bg-white" id="event_rdv_location" readonly />
								</div>
							</div>

							<div id="event_map" class="form-control"></div>
						</div>
						<div class="col p-0 d-flex flex-column mt-2">
								<div class="flex-grow-1" id="event_participants">
									<h4>Participants <span class="badge badge-success">5</span></h4>
								</div>
								<div class="flex-grow-1" id="event_interested">
									<h4>Interested <span class="badge badge-info">2</span></h4>
								</div>
						</div>
					</div>
				</div>

				<h5 class="text-muted mt-2 trad">Comments:</h5>
				<div id="event_comments" class="list-group text-break"></div>
				<div id="event_comments_error" class="alert alert-danger trad" role="alert">Unable to load comments</div>
				<form class="needs-validation form-inline mt-3 mb-0" novalidate>
					<div class="input-group col pl-0">
						<img id="event_comment_avatar" />
						<textarea class="form-control" id="event_comment" required rows="4" placeholder="Add a comment... Markdown available!"></textarea>
						<div class="invalid-feedback trad">Please provide a comment</div>
						<div id="comment_post_error"></div>
					</div>
					<button type="submit" class="btn btn-outline-primary trad" style="height: 110px;">Send</button>
				</form>
			</div>
		</div>
	</div>
</div>



<a href="javascript:;" id="changeBg">Change Background</a>

{% if is_connected %}<script>connected_user={{userinfos|safe}};</script>{% endif %}
<script src="static/js/bundle.min.js"></script>
<script src="static/js/jquery.slim.min.js"></script>
<script src="static/js/bootstrap.bundle.min.js"></script>
<script src="static/js/bootstrap-colorpicker.min.js"></script>
<script src="static/js/purify.min.js"></script>
<script src="static/js/marked.min.js"></script>
<script src="static/js/html5tooltips.min.js"></script>

<script src="static/js/leaflet.js"></script>
<script src="static/js/esri-leaflet.js"></script>
<script src="static/js/esri-leaflet-geocoder.js"></script>
<script src="static/js/Leaflet.fullscreen.min.js"></script>
</body>
</html>